<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="theme-color" content="#19A2B8">
    <link rel="icon" href="/icons/favicon.ico" type="image/x-icon">
    <link rel="manifest" href="manifest.json">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.css" integrity="sha512-3pIirOrwegjM6erE5gPSwkUzO+3cTjpnV9lexlNZqvupR64iZBnOOTiiLPb9M36zpMScbmUNIcHUqKD47M719g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>PhotoS</title>
    <style media="screen">
        #camera.withphoto{
            color: transparent !important;
            background-size: cover;
        }
    </style>
  </head>
  <body class="bg-info">
    <main class="p-2">
        <div class="container-fluid" id="messages">
            <div id="loader" class="text-center text-dark" style="color: black;">
                <!-- <i class="fas fa-spinner fa-2x fa-pulse"></i> -->
                <p>Loading Messages</p>
            </div>
        </div>
    </main>

    <div class="container-fluid fixed-bottom">
        <div id="toolbar" class="row bg-dark">
            <div class="col p-2 d-flex">
                <button data-toggle="modal" data-target="#viewfinder" 
                id="camera" class="px-3 mr-2 text-light border-light bg-dark rounded-circle">
                    
                </button>
                <textarea 
                maxlength="120" 
                id="caption"
                placeholder="Image Caption"
                style="margin-left: 1rem; resize: none;"
                class="flex-grow-1  w-100 rounded border-light align-middle pr-5"></textarea>
                <a id="send" style="right: 1.25rem;bottom: 1rem;z-index: 10; padding: 0.5rem;" class="position-absolute text-dark">Send</a>
            </div>
        </div>
    </div>

    <div id="viewfinder" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"> 
        <div class="modal-dialog fixed-bottom" role="document">
            <div class="modal-content bg-dark">
                <div class="modal-body p-1 text-center">
                    <video id="player" autoplay class="w-100 rounded " ></video>
                    <button type="button" data-dismiss="modal" id="shutter" class="rounded-circle bg-white text-danger p-1 my-2">Click</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="photoframe" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body p-1">
                    <img src="" class="w-100 rounded" data-dismiss="modal">
                </div>
            </div>
        </div>
    </div>

    <!-- Optional JavaScript -->

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="/modules/toastr/build/toastr.min.js"></script>

   
    
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/Classes/Camera.js"></script>
    <script src="/Classes/Message.js"></script>
    <script src="/main.js"></script>
    <script>
        if('mediaDevices' in navigator){
            __init();

            if('serviceWorker' in navigator){
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js');
                })
            }
        } else {
            toastr.error(null,'This app is not supported in your browser.Sorry',{timeout:30000});
        }
    </script>
  </body>
</html>